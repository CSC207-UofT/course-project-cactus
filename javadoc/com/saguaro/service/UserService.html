<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.13) on Wed Dec 08 22:39:39 EST 2021 -->
<title>UserService</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2021-12-08">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="UserService";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.saguaro.service</a></div>
<h2 title="Class UserService" class="title">Class UserService</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.saguaro.service.UserService</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<pre>@Service
@Transactional(readOnly=true)
public class <span class="typeNameLabel">UserService</span>
extends java.lang.Object</pre>
<div class="block">This class is a service class providing all logic for user related operations. It is responsible
 for interfacing with repository interfaces to fetch/persist User entities.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Charles Wong</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(com.saguaro.repository.UserRepository,com.saguaro.repository.RoleRepository,org.springframework.security.crypto.password.PasswordEncoder)">UserService</a></span>&#8203;(<a href="../repository/UserRepository.html" title="interface in com.saguaro.repository">UserRepository</a>&nbsp;userRepository,
           <a href="../repository/RoleRepository.html" title="interface in com.saguaro.repository">RoleRepository</a>&nbsp;roleRepository,
           org.springframework.security.crypto.password.PasswordEncoder&nbsp;passwordEncoder)</code></th>
<td class="colLast">
<div class="block">Constructs a UserService, injecting all requires dependencies.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../entity/User.html" title="class in com.saguaro.entity">User</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addFriend(java.lang.String,java.lang.String)">addFriend</a></span>&#8203;(java.lang.String&nbsp;friendUsername,
         java.lang.String&nbsp;username)</code></th>
<td class="colLast">
<div class="block">Given a friend username and a username, add the User represented by the former as
 a friend of the latter.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../entity/User.html" title="class in com.saguaro.entity">User</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#edit(java.lang.String,java.lang.String,java.lang.String)">edit</a></span>&#8203;(java.lang.String&nbsp;name,
    java.lang.String&nbsp;password,
    java.lang.String&nbsp;username)</code></th>
<td class="colLast">
<div class="block">Edits the name and password of a User, specified by a username.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>org.springframework.security.core.userdetails.UserDetails</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#findByToken(java.lang.String)">findByToken</a></span>&#8203;(java.lang.String&nbsp;token)</code></th>
<td class="colLast">
<div class="block">Attempt to find the user that holds the provided authentication token.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../entity/User.html" title="class in com.saguaro.entity">User</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#login(java.lang.String,java.lang.String)">login</a></span>&#8203;(java.lang.String&nbsp;username,
     java.lang.String&nbsp;password)</code></th>
<td class="colLast">
<div class="block">Given a username and password, attempt to log in the user.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#logout(java.lang.String)">logout</a></span>&#8203;(java.lang.String&nbsp;username)</code></th>
<td class="colLast">
<div class="block">Given a username, logout the corresponding user by invalidating their
 authentication token.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../entity/User.html" title="class in com.saguaro.entity">User</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#registerNewUser(java.lang.String,java.lang.String,java.lang.String)">registerNewUser</a></span>&#8203;(java.lang.String&nbsp;username,
               java.lang.String&nbsp;password,
               java.lang.String&nbsp;name)</code></th>
<td class="colLast">
<div class="block">Register a new user with Saguaro, using the provided username, password, and name.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="../entity/User.html" title="class in com.saguaro.entity">User</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#removeFriend(java.lang.String,java.lang.String)">removeFriend</a></span>&#8203;(java.lang.String&nbsp;friendUsername,
            java.lang.String&nbsp;username)</code></th>
<td class="colLast">
<div class="block">Given a friend username and a username, remove the User represented by the former from
 the friends of the latter.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a id="&lt;init&gt;(com.saguaro.repository.UserRepository,com.saguaro.repository.RoleRepository,org.springframework.security.crypto.password.PasswordEncoder)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>UserService</h4>
<pre>public&nbsp;UserService&#8203;(<a href="../repository/UserRepository.html" title="interface in com.saguaro.repository">UserRepository</a>&nbsp;userRepository,
                   <a href="../repository/RoleRepository.html" title="interface in com.saguaro.repository">RoleRepository</a>&nbsp;roleRepository,
                   org.springframework.security.crypto.password.PasswordEncoder&nbsp;passwordEncoder)</pre>
<div class="block">Constructs a UserService, injecting all requires dependencies.
 <p>
 Note that this constructor is automatically picked up by Spring for autowiring.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>userRepository</code> - a UserRepository instance to support this service</dd>
<dd><code>roleRepository</code> - a RoleRepository instance to support this service</dd>
<dd><code>passwordEncoder</code> - a PasswordEncoder instance to support this service</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="login(java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>login</h4>
<pre class="methodSignature">@Transactional
public&nbsp;<a href="../entity/User.html" title="class in com.saguaro.entity">User</a>&nbsp;login&#8203;(java.lang.String&nbsp;username,
                  java.lang.String&nbsp;password)
           throws <a href="../exception/InvalidLoginException.html" title="class in com.saguaro.exception">InvalidLoginException</a></pre>
<div class="block">Given a username and password, attempt to log in the user. If successful, an authentication
 token is generated for the user, and attached to the returned User object. If the user already
 has an authentication token, a new one will be generated regardless, which will overwrite
 the old token.
 <p>
 If the provided combination does not match an existing user, then an InvalidLoginException is thrown.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>username</code> - the String username attempting to log in</dd>
<dd><code>password</code> - the String password of the user attempting to log in</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the corresponding User object to the inputted username and password, with a login token</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../exception/InvalidLoginException.html" title="class in com.saguaro.exception">InvalidLoginException</a></code> - if the provided username and password does not match an existing user</dd>
</dl>
</li>
</ul>
<a id="logout(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logout</h4>
<pre class="methodSignature">@Transactional
public&nbsp;void&nbsp;logout&#8203;(java.lang.String&nbsp;username)</pre>
<div class="block">Given a username, logout the corresponding user by invalidating their
 authentication token.
 <p>
 This method assumes that the provided username is one that belongs to an
 existing user, since a user must be authenticated with Saguaro to logout.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>username</code> - the String username of the user to logout</dd>
</dl>
</li>
</ul>
<a id="registerNewUser(java.lang.String,java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerNewUser</h4>
<pre class="methodSignature">@Transactional
public&nbsp;<a href="../entity/User.html" title="class in com.saguaro.entity">User</a>&nbsp;registerNewUser&#8203;(java.lang.String&nbsp;username,
                            java.lang.String&nbsp;password,
                            java.lang.String&nbsp;name)
                     throws <a href="../exception/InvalidParamException.html" title="class in com.saguaro.exception">InvalidParamException</a></pre>
<div class="block">Register a new user with Saguaro, using the provided username, password, and name. The password is
 hashed using the PasswordEncoder bean injected into this service class, and saved. All users are given
 the role "ROLE_USER", which is assumed to exist in the role database table before any user is registered.
 <p>
 If a username attempting to register already belongs to an existing user, an InvalidParamException is thrown.
 <p>
 Note that registering a user does not log them in.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>username</code> - the String username to register</dd>
<dd><code>password</code> - the String password of the user attempting to register</dd>
<dd><code>name</code> - the String name of the user attempting to register</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a fully populated User object containing the details of the newly registered user</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../exception/InvalidParamException.html" title="class in com.saguaro.exception">InvalidParamException</a></code> - if the username provided already belongs to an existing user</dd>
</dl>
</li>
</ul>
<a id="findByToken(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findByToken</h4>
<pre class="methodSignature">public&nbsp;org.springframework.security.core.userdetails.UserDetails&nbsp;findByToken&#8203;(java.lang.String&nbsp;token)</pre>
<div class="block">Attempt to find the user that holds the provided authentication token. If none exist,
 then return null. Otherwise, populate a <code>UserDetails</code> object with the user's details
 and return that. This method is intended to be used as part of Saguaro's security flow.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>token</code> - the String authentication token to attempt to match</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a fully populated UserDetails object containing the found user, or null if none is found</dd>
</dl>
</li>
</ul>
<a id="edit(java.lang.String,java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>edit</h4>
<pre class="methodSignature">@Transactional
public&nbsp;<a href="../entity/User.html" title="class in com.saguaro.entity">User</a>&nbsp;edit&#8203;(java.lang.String&nbsp;name,
                 java.lang.String&nbsp;password,
                 java.lang.String&nbsp;username)</pre>
<div class="block">Edits the name and password of a User, specified by a username. The name
 or password can be null, in which case that attribute of the user remains
 unchanged.
 <p>
 The plaintext password is hashed using bcrypt, and then saved.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>name</code> - the String name to replace, if not null</dd>
<dd><code>password</code> - the String plaintext of the password to replace, if not null</dd>
<dd><code>username</code> - the String username of the user to change the attributes of</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the newly saved User object</dd>
</dl>
</li>
</ul>
<a id="addFriend(java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addFriend</h4>
<pre class="methodSignature">@Transactional
public&nbsp;<a href="../entity/User.html" title="class in com.saguaro.entity">User</a>&nbsp;addFriend&#8203;(java.lang.String&nbsp;friendUsername,
                      java.lang.String&nbsp;username)
               throws <a href="../exception/ResourceNotFoundException.html" title="class in com.saguaro.exception">ResourceNotFoundException</a></pre>
<div class="block">Given a friend username and a username, add the User represented by the former as
 a friend of the latter. This method assumes that the username (but not the
 friend's username) belongs to a valid user, since a user must be authenticated
 in order to add a friend.
 <p>
 If the provided friend username does not map to an existing user, a
 ResourceNotFoundException is thrown.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>friendUsername</code> - the String username of the user to add as a friend</dd>
<dd><code>username</code> - the String username of the user adding the friend</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the newly modified User object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../exception/ResourceNotFoundException.html" title="class in com.saguaro.exception">ResourceNotFoundException</a></code> - if the given username to add as a friend does not
                                   exist</dd>
</dl>
</li>
</ul>
<a id="removeFriend(java.lang.String,java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>removeFriend</h4>
<pre class="methodSignature">@Transactional
public&nbsp;<a href="../entity/User.html" title="class in com.saguaro.entity">User</a>&nbsp;removeFriend&#8203;(java.lang.String&nbsp;friendUsername,
                         java.lang.String&nbsp;username)
                  throws <a href="../exception/ResourceNotFoundException.html" title="class in com.saguaro.exception">ResourceNotFoundException</a></pre>
<div class="block">Given a friend username and a username, remove the User represented by the former from
 the friends of the latter. This method assumes that the username (but not the
 friend's username) belongs to a valid user, since a user must be authenticated
 in order to remove a friend.
 <p>
 If the provided friend username does not map to an existing friend of the user, a
 ResourceNotFoundException is thrown.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>friendUsername</code> - the String username of the user to remove from friends</dd>
<dd><code>username</code> - the String username of the user removing the friend</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the newly modified User object</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../exception/ResourceNotFoundException.html" title="class in com.saguaro.exception">ResourceNotFoundException</a></code> - if the user with the given username is not an existing
                                   friend</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
